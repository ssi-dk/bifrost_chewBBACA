#-Basic info----------------------------------------------------------------------------------------
display_name: chewbbaca
name: &component_name chewbbaca__v1_0_1__
version:
  schema: ["v2_1_0"]
  code: v1_0_1
  resource: ""
#---------------------------------------------------------------------------------------------------

#-Details-------------------------------------------------------------------------------------------
details:
  target: [sample]
  description: >
    This performs read based cgMLST with the chewbbaca suite https://github.com/B-UMMI/chewBBACA using
    either custom schemas or the ones provided with chewbbaca.
#---------------------------------------------------------------------------------------------------

#-Category info-------------------------------------------------------------------------------------
category: [cgmlst]
#---------------------------------------------------------------------------------------------------

#-Install-------------------------------------------------------------------------------------------
install:
  path: # Set by install program
  dockerfile: docker://ssidk/bifrost_chewbbaca
#---------------------------------------------------------------------------------------------------

#-Options-------------------------------------------------------------------------------------------
options:
  chewbbaca_species_mapping: # (name, speciesID, schemaID)
    Campylobacter jejuni: ["Campylobacter", 4, 1]
    Campylobacter coli: ["Campylobacter", 4, 1]
    Escherichia coli: ["Escherichia_coli", 5, 1]
    Shigella sonnei: ["Escherichia_coli", 5, 1]
    Shigella flex: ["Escherichia_coli", 5, 1]
    Salmonella enterica: ["Salmonella_enterica", 8, 1]
    Yersinia enterocolitica: ["Yersinia", 7, 1]
    Listeria monocytogenes: ["Listeria", 6, 1]

#---------------------------------------------------------------------------------------------------

#-Required resource files---------------------------------------------------------------------------
resources:
  schemes: "/bifrost/components/bifrost_chewbbaca/resources"
#---------------------------------------------------------------------------------------------------

#-Requirements to run component---------------------------------------------------------------------
requirements:
  sample:
    categories:
      paired_reads:
        summary:
          data:
      denovo_assembly:
        summary:
          data:
      species_detection:
        summary:
          detected_species:
#---------------------------------------------------------------------------------------------------

#-DB Value changes (excluding component output)-----------------------------------------------------
db_values_changes:
  files: []
  sample:
    categories:
      cgmlst:
        summary:  # see sample_component summary
        component:
          _id: 
          date:  # ObjectId
    report:
      cgmlst:
        title: "cgmlst"
        info: *component_name
        columns: 
          - {id: "alleles", name: "alleles"}
        data: []
  sample_component:
    summary:
      sequence_type: 
    results:
      chewbbaca/chewbbaca_results/results_<date><time>/results_alleles.tsv: {}

#---------------------------------------------------------------------------------------------------
